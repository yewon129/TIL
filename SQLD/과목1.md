# SQLD



### 과목 1. 데이터 모델링의 이해

####  제 1장. 데이터 모델링의 이해

* 발생 시점에 따른 엔터티 분류
  * 기본/키 엔터티
  * 중심엔터티
  * 행위엔터티

* 모델링 : 현실세계에 대해서 표현하는 것
  * 추상화의 의미를 가질 수 있다.
  * 복잡한 현실을 제한된 언어나 표기법으로 단순화의 의미를 가진다.
  * 애매모호함을 배재하는 정확화의 의미를 가진다.
  * 시스템 구현만을 위해 진행하는 사전단계의 작업으로서 데이터베이스 구축을 위한 사전 작업의 의미를 가진다 X => 모델링은 단지 시스템 구현만을 위해 수행하는 태스크가 아니며, 시스템 구현을 포함한 업무분석 및 업무형상화를 하는 목적도 있음

* 모델링이 필요한 이유
  * 업무정보를 구성하는 기초가 되는 정보들에 대해 일정한 표기법에 의해 표현한다.
  * 분석된 모델을 가지고 데이터베이스를 생성하여 개발 및 데이터관리에 사용하기 위한 것
    * 데이터모델링 : 데이터베이스만을 구축 하기 위한 용도로 쓰이는 것이 아니라 데이터모델링 자체로서 업무를 설명하고 분석하는 부분에서도 매우 중요한 의미를 가진다.
* 데이터모델링을 할 때 유의점
  * 중복
  * 비유연성
  * 비일관성
  * 오답 : 비연계성!
* 데이터 모델링
  * 개념적 데이터 모델링
    * 추상화 수준이 높다.
    * 업무중심적이고 포괄적인 수준의 모델링 진행
    * 전사적 데이터 모델링, EA 수립시 많이 이용
  * 논리적 데이터 모델링
    * 시스템으로 구축하고자하는 업무에 대해 key, 속성, 관계 등을 정확하세 표현
    * 재사용성 높음
  * 물리적 데이터 모델링
    * 실제 데이터베이스에 이식할 수 있도록 성능, 저장 등 물리적인 성격을 고려하여 설계
* 3단계 구조에서 스키마 구조
  * 외부 스키마
  * 개념 스키마
    * 통합관점
  * 내부 스키마

* 엔터티의 특징
  * 반드시 해당 업무에서 필요하고 관리하고자 하는 정보이어야 한다.
  * 유일한 식별자에 의해 식별이 가능해야 한다.
  * 영속적으로 존재하는 인스턴스의 집합이어야 한다. (한개가 아니라 두개 이상!!)
  * 엔터티는 업무 프로세스에 의해 이용되어야 한다.
  * 반드시 속성이 있어야 한다.
  * 다른 엔터티와 최소 한 개 이상의 관계가 있어야 한다.

* 기본 엔터티 : 그 업무에 원래 존재하는 정보, 다른 엔터티와의 관계에 의해 생성되지 않고 독립적으로 생성이 가능하고 자신은 타 엔터티의 부모의 역할을 하게 된다.
* 엔티티, 인스턴스, 속성, 속성 값의 관계
  * 한 개의 엔티티는 두 개 이상의 인스턴스의 집합 이어야 한다.
  * 한 개의 엔티티는 두 개 이상의 속성을 갖는다.
  * 한 개의 속성은 한 개의 속성값을 가진다.
* 속성
  * 업무에서 필요로 하는 인스턴스에서 관리하고자 하는 의미상 더 이상 분리되지 않는 최소의 데이터 단위
  * 엔티티에 대한 자세하고 구체적인 정보를 나타낸다.
  * 하나의 엔티티는 두 개 이상의 속성을 갖는다.
  * 하나의 인스턴스에서 각각의 속성은 한 개의 속성값을 가져야 한다.
  * 집합이다.
* 도메인
  * 각 속성이 가질 수 있는 값의 범위
  * 엔터티 내에서 속성에 대한 데이터타입과 크기 그리고 제약사항을 지정한다.
* 속성의 명칭부여
  * 해당업무에서 사용하는 이름
  * 서술식 속성명은 사용하지 않는다.
  * 약어사용은 가급적 제한한다.
  * 전체 데이터모델에서 유일성 확보하는 것이 좋다.
* 데이터모델링 관계
  * 관계는 존재에 의한 관계와 행위에 의한 관계로 구분될 수 있으나 ERD 에서는 관계를 연결할 때, 존재와 행위를 구분하지 않고 단일화된 표기법을 사용한다.
    * 클래스다이어그램에서는 이것을 구분하여 연관관계와 의존관계로 표현한다.
* 두 개의 엔터티 사이에 정의한 관계를 체크하는 사항
  * 두 개의 엔터티 사이에 관심 있는 연관규칙이 존재하는가?
  * 두 개의 엔터티 사이에 정보의 조합이 발생하는가?
  * 업무 기술서, 장표에 관계연결에 대한 규칙이 서술되어 있는가?
  * 업무기술서, 장표에 관계연결을 가능하게 하는 동사가 있는가?

* 식별자의 종류
  * 주식별자 / 보조식별자
    * 엔터티 내에서 대표성을 가지는가
  * 내부식별자 / 외부식별자
    * 엔터티 내에서 스스로 생성되었는지 여부
  * 단일식별자 / 복합식별자
    * 단일속성으로 식별이 되는가
  * 본질식별자 / 인조식별자
    * 원래 업무적으로 의미가 있던 식별자 속성을 대체하여 일련번호와 같이 새롭게 만든 식별자를 구분

* 주식별자의 특징
  * 유일성 / 최소성 / 불변성 / 존재성





#### 제2장. 데이터 모델과 성능

* 성능 데이터 모델링 고려사항 순서
  1. 데이터 모델링을 할 때 정규화를 정확하게 수행
  2. DB 용량사정을 수행
  3. DB에 발생되는 트랜잭션의 유형을 파악
  4. 용량과 트랜잭션의 유형에 따라 반정규화 수행
  5. 이력 모델의 조정, PK/ FK 조정, 슈퍼/서브타입 조정
  6. 성능관점에서 데이터 모델을 검증
* 함수적 종속성 : 데이터들이 어떤 기준 값에 의해 종속되는 현상
* 정규화 (-)
  * 반복적인 데이터를 분리하고 각 데이터가 종속된 테이블에 적절하게 배치되도록 하는 것
  * 1차 정규화 :  같은 성격, 내용 컬럼이 연속될 때 컬럼 제거, 테이블 생성
  * ![image-20220903225543158](C:\Users\SSAFY\Desktop\TIL\note\SQLD\과목1.assets\image-20220903225543158.png)
  * 2차 정규화 : PK 복합키 구성일 때 부분적 함수 종속 관계 테이블 분리
  * ![image-20220903225603811](C:\Users\SSAFY\Desktop\TIL\note\SQLD\과목1.assets\image-20220903225603811.png)
  * 3차 정규화 : PK가 아닌 일반 컬럼에 의존하는 컬럼 분리
  * ![image-20220903225618460](C:\Users\SSAFY\Desktop\TIL\note\SQLD\과목1.assets\image-20220903225618460.png)
* 반정규화 (-)
  * 정규화된 엔티티, 속성, 관계에 대해 시스템의 성능향상과 개발과 운영의 단순화를 위해 중복, 통합, 분리 등을 수행하는 데이터 모델링의 기법
  * 조회시 디스크 I/O가 많거나 경로가 멀어 조인에 의한 성능 저하를 막기 위해 수행
  * 일반적으로 정규화시 입력 / 수정 / 삭제 성능이 향상되며 반정규화시 조인 성능이 향상된다.
* 반정규화 외 다른 방법
  * VIEW 사용 : 지나치게 많은 조인이 걸려 데이터를 조회하는 작업이 기술적으로 어려울 경우 view를 사용 (view가 성능향상 시키는 것은 아님)
  * 클러스터링 : 대량의 데이터처리나 부분처리에 의해 성능이 저하되는 경우 클러스터링을 적용하거나 인덱스를 조정 ( 조회가 대부분일 때 클러스터링 적용)
  * 파티셔닝 : 대량의 데이터는 PK의 성격에 따라 부분적인 테이블로 분리할 수 있다. 파티셔닝 키에 의해 물리적 저장공간 분리
  * 캐시 : 응용 애플리케이션에서 로직을 구사하는 방법을 변경함으로써 성능을 향상시킬 수 있다.
* 테이블 반정규화
  * 테이블 병합
    * 1:1 관계 , 1:M 관계, 슈퍼/서브타입
  * 테이블 분할
    * 수직 분할 : 칼럼단위 테이블을 디스크 I/O를 분산처리하기 위해 테이블을 1:1로 분리하여 성능향상
    * 수평 분할 : 로우 단위로 직중 발생되는 트랜잭션을 분석하여 로우단위로 테이블을 쪼갬